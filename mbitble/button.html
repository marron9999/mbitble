<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>MBITBLE - BUTTON</title>
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
<link  href="reset.css" type="text/css" rel="stylesheet">
<script src="mbituuid.js" type="text/javascript"></script>
<script src="mbitble.js" type="text/javascript"></script>
<link  href="mbitble.css" type="text/css" rel="stylesheet">
<style>
</style>
<script>
var BUTTON = {};
connectBLE = async function () {
	initBLE();
	BUTTON["A"] = function(event) {
		LOG("Notify: BUTTON A:" + BUTTON.uint8(event, 0));
	};
	BUTTON["B"] = function(event) {
		LOG("Notify: BUTTON B:" + BUTTON.uint8(event, 0));
	};
	LOG('MBITBLE.connect("BUTTON", BUTTON);');
	BUTTON = await MBITBLE.connect("BUTTON", BUTTON);
};
async function button(a, e) {
	LOG('BUTTON.read_data("' + a + '");');
	let array = await BUTTON.read_data(a);
	let p = e.innerHTML.indexOf(":");
	if(array == null || array.length <= 0)
		e.innerHTML = e.innerHTML.substr(0, p+2) + "null";
	else e.innerHTML = e.innerHTML.substr(0, p+2) + array.getUint8(0);
}
</script>
</head>
<body>
<div id=body>
<div><button onclick="connectBLE()">Connect</button>
&nbsp;<button onclick="disconnectBLE()">Disconnect</button></div>
<hr>
<div>
State of Button B may be read on demand by a connected client or the client may subscribe to notifications of state change.<br>
3 button states are defined and represented by a simple numeric enumeration:<br> 0 = not pressed,<br> 1 = pressed,<br> 2 = long press.
</div>
<div>
<button onclick="button('A', this)">BUTTON A: none</button>&nbsp;
<button onclick="button('B', this)">BUTTON B: none</button></div>

</div>
<hr>
<div id=log></div>
</body>
</html>
